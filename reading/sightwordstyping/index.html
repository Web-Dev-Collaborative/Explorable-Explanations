<html>
<head>
<style>
    body {
        background-color: darkslateblue;
        color: white;
    }

    a {
      color: hotpink;
    }

    .timecontainer {
        width: 100%;
        text-align: center;
        font-size: 2em;    
    }

    .containersmall { 
        width: 80%;
        height: 80%;
        /*position: absolute;*/
        top:0;
        bottom: 0;
        left: 0;
        right: 0;

        margin: auto;
    }

    #footer {
        width: 90%;
        text-align: center;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
    }

    ol { 
        text-align: center;
    }

    li {
      padding: 0 15px 0 15px;
      display: inline-block;
      margin: 10px;
      list-style: none;
      outline: solid;
      /*width: 150px;
      height: 150px;*/
      min-width: 25%;
      height: 20%;
      line-height: 100%;
      text-align: center;
      background-color: violet;
    }

    /*
    .lismall {
      width: 20%;
      height: 20%;      
    }

    .lilarge {
      width: 15%;
      height: 15%;      
    }

    .lilarger {
      width: 13%;
      height: 13%;      
    }
    */

    span { 
      font-size: 3em;
      font-weight: bold;
      color: black;
      position: relative;
      top: 50%;
    }

    @media only screen and (max-width: 500px) {
      span {
        font-size: 2em;
      }
    }

    .currentletter {
      font-size: 4em;
    }

    .face-up {
        background-color: crimson;
        color: white;
    }

    .match {
        background-color: yellow;
        color: black;
    }

    select
    {
        font-size:2em;
        font-weight: bold;
        -webkit-appearance: none;
        width: 300px !important;
    }

    #toggle {
        margin: auto;
        text-align: center;
        background-color: lightgreen;
        width: 250px;
        height: 25px;
        line-height: 25px;
    }

    #toggle a {
        text-decoration: none;
        font-weight: bold;
    }

.myButton {
  -moz-box-shadow:inset 0px 1px 0px 0px #bee2f9;
  -webkit-box-shadow:inset 0px 1px 0px 0px #bee2f9;
  box-shadow:inset 0px 1px 0px 0px #bee2f9;
  background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #63b8ee), color-stop(1, #468ccf));
  background:-moz-linear-gradient(top, #63b8ee 5%, #468ccf 100%);
  background:-webkit-linear-gradient(top, #63b8ee 5%, #468ccf 100%);
  background:-o-linear-gradient(top, #63b8ee 5%, #468ccf 100%);
  background:-ms-linear-gradient(top, #63b8ee 5%, #468ccf 100%);
  background:linear-gradient(to bottom, #63b8ee 5%, #468ccf 100%);
  filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#63b8ee', endColorstr='#468ccf',GradientType=0);
  background-color:#63b8ee;
  -moz-border-radius:6px;
  -webkit-border-radius:6px;
  border-radius:6px;
  border:1px solid #3866a3;
  display:inline-block;
  cursor:pointer;
  color:#14396a;
  font-family:Arial;
  font-size:15px;
  font-weight:bold;
  padding:6px 24px;
  text-decoration:none;
  text-shadow:0px 1px 0px #7cacde;
}
.myButton:hover {
  background:-webkit-gradient(linear, left top, left bottom, color-stop(0.05, #468ccf), color-stop(1, #63b8ee));
  background:-moz-linear-gradient(top, #468ccf 5%, #63b8ee 100%);
  background:-webkit-linear-gradient(top, #468ccf 5%, #63b8ee 100%);
  background:-o-linear-gradient(top, #468ccf 5%, #63b8ee 100%);
  background:-ms-linear-gradient(top, #468ccf 5%, #63b8ee 100%);
  background:linear-gradient(to bottom, #468ccf 5%, #63b8ee 100%);
  filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#468ccf', endColorstr='#63b8ee',GradientType=0);
  background-color:#468ccf;
}
.myButton:active {
  position:relative;
  top:1px;
}



</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script>

//http://www.mrsperkins.com/files/dolch_book.pdf

var sentences = {};

//prePrimerWords
sentences["a"] = ["I ate a snack."];
sentences["and"] = ["My friend and I play."];
sentences["away"] = ["I will throw away my lunch."];
sentences["big"] = ["That is a big truck."];
sentences["blue"] = ["The sky is blue."];
sentences["can"] = ["I can read."];
sentences["come"] = ["Will you come over?"];
sentences["down"] = ["She went down the slide."];
sentences["find"] = ["I can't find my pencil."];
sentences["for"] = ["This gift is for you."];
sentences["funny"] = ["That was a funny joke."];
sentences["go"] = ["They will go to school."];
sentences["help"] = ["I will help you."];
sentences["here"] = ["I sit here."];
sentences["I"] = ["I am six years old."];
sentences["in"] = ["The rabbit is in the hole."];
sentences["is"] = ["She is my friend."];
sentences["it"] = ["We like it."];
sentences["jump"] = ["I will jump over the puddle."];
sentences["little"] = ["My little sister is cute."];
sentences["look"] = ["I will look in my desk."];
sentences["make"] = ["My grandma will make a cake."];
sentences["me"] = ["That belongs to me."];
sentences["my"] = ["Where is my pencil?"];
sentences["not"] = ["She is not in school today."];
sentences["one"] = ["I have one cookie for snack."];
sentences["play"] = ["Will you play tag with me?"];
sentences["red"] = ["The apple is red."];
sentences["run"] = ["I can run fast."];
sentences["said"] = ["He said I was funny."];
sentences["see"] = ["Did you see my hat?"];
sentences["the"] = ["She read the book."];
sentences["three"] = ["I have three pencils."];
sentences["to"] = ["I will walk to your house."];
sentences["two"] = ["There are two kids on the bus."];
sentences["up"] = ["I ran up the hill."];
sentences["we"] = ["We are in first grade."];
sentences["where"] = ["Where are you going?"];
sentences["yellow"] = ["The sun is yellow."];
sentences["you"] = ["I will jump rope with you."];

//primerWords
sentences["all"] = ["I ate all my lunch."];
sentences["am"] = ["I am a good student."];
sentences["are"] = ["My friends are here."];
sentences["at"] = ["I looked at the dog."];
sentences["ate"] = ["He ate his snack."];
sentences["be"] = ["I will be kind."];
sentences["black"] = ["The car is black."];
sentences["brown"] = ["I saw a brown bear."];
sentences["but"] = ["I took a nap, but I am still tired."];
sentences["came"] = ["My cousins came for a visit."];
sentences["did"] = ["She did her homework."];
sentences["do"] = ["I will do my chores."];
sentences["eat"] = ["What did you eat for breakfast?"];
sentences["four"] = ["There are four deer in the field."];
sentences["get"] = ["They will get a gold slip."];
sentences["good"] = ["You did a good job!"];
sentences["have"] = ["I have a broken arm."];
sentences["he"] = ["He is my friend."];
sentences["into"] = ["I walked into the store."];
sentences["like"] = ["I like my teacher."];
sentences["must"] = ["You must finish your work."];
sentences["new"] = ["I moved to a new town."];
sentences["no"] = ["My mom says the answer is no."];
sentences["now"] = ["We have Music now."];
sentences["on"] = ["She sat on the swing."];
sentences["our"] = ["Our family went on a trip."];
sentences["out"] = ["I walked out of the classroom."];
sentences["please"] = ["Can I please go to the party?"];
sentences["pretty"] = ["My mom is pretty."];
sentences["ran"] = ["My cat ran away."];
sentences["ride"] = ["I went on a roller coaster ride."];
sentences["saw"] = ["He saw a ghost."];
sentences["say"] = ["What did you say?"];
sentences["she"] = ["She is my friend."];
sentences["so"] = ["I am so hungry."];
sentences["soon"] = ["I will be done soon."];
sentences["that"] = ["I saw that show on TV."];
sentences["there"] = ["Put it over there."];
sentences["they"] = ["They always walk in the hall."];
sentences["this"] = ["I found this on the floor."];
sentences["too"] = ["I washed my hands too."];
sentences["under"] = ["There is a monster under my bed."];
sentences["want"] = ["I want a cookie."];
sentences["was"] = ["He was running down the hall."];
sentences["well"] = ["I don't feel well."];
sentences["went"] = ["We went to the movies."];
sentences["what"] = ["I don't know what to do."];
sentences["white"] = ["The snow is white."];
sentences["who"] = ["Who will be my friend?"];
sentences["will"] = ["She will play on the swings."];
sentences["with"] = ["Can I play with you?"];
sentences["yes"] = ["Yes, I like using the computer."];

//firstGradeWords
sentences["after"] = ["Read your book after school."];
sentences["again"] = ["Did you watch the movie again?"];
sentences["an"] = ["I saw an elephant at the zoo."];
sentences["any"] = ["I didn't see any whales."];
sentences["ask"] = ["Did you ask the teacher?"];
sentences["as"] = ["I am as quiet as a mouse."];
sentences["by"] = ["Sit by your friend."];
sentences["could"] = ["I wish I could play outside."];
sentences["every"] = ["I like every book on the shelf."];
sentences["fly"] = ["The bird will fly to the nest."];
sentences["from"] = ["I got a dime from my mom."];
sentences["give"] = ["Give Tommy his paper."];
sentences["going"] = ["I am going to see a movie."];
sentences["had"] = ["I had a great time."];
sentences["has"] = ["She has a folder on her desk."];
sentences["her"] = ["That belongs to her."];
sentences["him"] = ["I watched him play baseball."];
sentences["his"] = ["He hung his coat on a hook."];
sentences["how"] = ["How did you do that?"];
sentences["just"] = ["I just got home."];
sentences["know"] = ["I know how to sing."];
sentences["let"] = ["Please let her use your crayon."];
sentences["live"] = ["I live in Cresco."];
sentences["may"] = ["You may go play."];
sentences["of"] = ["I had a lot of fun."];
sentences["old"] = ["My sneakers are old."];
sentences["once"] = ["Stop talking at once!"];
sentences["open"] = ["Leave the door open."];
sentences["over"] = ["Can you come over to my house?"];
sentences["put"] = ["I will put the book on the shelf."];
sentences["round"] = ["The ball is round."];
sentences["some"] = ["Can I have some?"];
sentences["stop"] = ["It is time to stop."];
sentences["take"] = ["I will take my folder home."];
sentences["thank"] = ["Thank you for helping me."];
sentences["them"] = ["That ball belongs to them."];
sentences["then"] = ["I will eat lunch and then go play."];
sentences["think"] = ["I think it is your turn."];
sentences["walk"] = ["Let's go for a walk."];
sentences["were"] = ["They were having a good time."];
sentences["when"] = ["When are we leaving?"];

//secondGradeWords
sentences["always"] = ["I always raise my hand."];
sentences["around"] = ["Walk around the school."];
sentences["because"] = ["I like school because it is fun."];
sentences["been"] = ["It has been raining for two days."];
sentences["before"] = ["Wash your hands before you eat."];
sentences["best"] = ["That was the best time I ever had."];
sentences["both"] = ["We both went for a walk."];
sentences["call"] = ["Please call me on the phone."];
sentences["cold"] = ["It was cold last night."];
sentences["does"] = ["She does a good job."];
sentences["don't"] = ["Don't cut in line."];
sentences["fast"] = ["He is fast."];
sentences["first"] = ["First grade is great!"];
sentences["five"] = ["A nickel is worth five cents."];
sentences["found"] = ["I found my scissors in my desk."];
sentences["gave"] = ["My mom gave me a snack."];
sentences["goes"] = ["She goes to kindergarten."];
sentences["green"] = ["The grass is green."];
sentences["its"] = ["The skunk lifts its tail."];
sentences["made"] = ["I made my bed."];
sentences["many"] = ["How many pets do you have?"];
sentences["off"] = ["Turn off the light."];
sentences["or"] = ["Do you like chocolate or vanilla?"];
sentences["pull"] = ["The horse will pull the carriage."];
sentences["read"] = ["Which book shall I read?"];
sentences["right"] = ["That is the right answer."];
sentences["sing"] = ["Let's sing a song."];
sentences["sit"] = ["Please sit down."];
sentences["sleep"] = ["The baby will sleep in the crib."];
sentences["tell"] = ["Did you tell your dad?"];
sentences["their"] = ["The family got in their car."];
sentences["these"] = ["Do these books belong to you?"];
sentences["those"] = ["Put those books on the desk."];
sentences["upon"] = ["Once upon a time there was a frog."];
sentences["us"] = ["Read us a story."];
sentences["use"] = ["Please use an inside voice."];
sentences["very"] = ["I am very tired."];
sentences["wash"] = ["I will wash the dishes."];
sentences["which"] = ["Which one is yours?"];
sentences["why"] = ["Why did you leave?"];
sentences["wish"] = ["I wish it was time to go home."];
sentences["work"] = ["Finish your work."];
sentences["would"] = ["What would you like for dinner?"];
sentences["write"] = ["Did you write in your journal?"];
sentences["your"] = ["I saw your teacher in the hall."];

//thirdGradeWords
sentences["about"] = ["I learned about Thanksgiving."];
sentences["better"] = ["Do you feel better?"];
sentences["bring"] = ["I will bring my paper home."];
sentences["carry"] = ["Carry the groceries to the car."];
sentences["clean"] = ["Clean up your mess."];
sentences["cut"] = ["I cut my finger."];
sentences["done"] = ["I am done with my work."];
sentences["draw"] = ["He will draw a picture."];
sentences["drink"] = ["Get a drink from the fountain."];
sentences["eight"] = ["She is eight years old."];
sentences["fall"] = ["Don't fall off the jungle gym."];
sentences["far"] = ["How far away is it?"];
sentences["full"] = ["The basket is full of apples."];
sentences["got"] = ["He got sick."];
sentences["grow"] = ["The seed will grow into a plant."];
sentences["hold"] = ["Hold onto the railing."];
sentences["if"] = ["I will be happy if you play."];
sentences["keep"] = ["Keep up the good work!"];
sentences["kind"] = ["Be kind to others."];
sentences["laugh"] = ["I heard them laugh at the joke."];
sentences["light"] = ["Turn on the light."];
sentences["long"] = ["Her hair is long."];
sentences["much"] = ["How much does that cost?"];
sentences["myself"] = ["I hurt myself."];
sentences["never"] = ["I've never been to Disney World."];
sentences["only"] = ["I only read two pages."];
sentences["own"] = ["Use your own pencil."];
sentences["pick"] = ["Pick a name from the hat."];
sentences["seven"] = ["I am going to be seven years old."];
sentences["shall"] = ["What shall I wear?"];
sentences["show"] = ["I will show you the picture."];
sentences["six"] = ["There are six kids on the swings."];
sentences["small"] = ["My shoes are too small."];
sentences["start"] = ["School will start soon."];
sentences["ten"] = ["I have ten fingers."];
sentences["today"] = ["We have gym class today."];
sentences["together"] = ["Let's play together."];
sentences["try"] = ["Please try to be quiet."];
sentences["warm"] = ["The soup is warm."];

var kindergartenWordsSet01 = ["a","go","it","no","the","and","he","like","an","to","at","I","look","play","up","can","in","me","see","we","for","is","my","she","you"];

var prePrimerWords = ["a","and","away","big","blue","can","come","down","find","for","funny","go","help","here","I","in","is","it","jump","little","look","make","me","my","not","one","play","red","run","said","see","the","three","to","two","up","we","where","yellow","you"];

var primerWords = ["all","am","are","at","ate","be","black","brown","but","came","did","do","eat","four","get","good","have","he","into","like","must","new","no","now","on","our","out","please","pretty","ran","ride","saw","say","she","so","soon","that","there","they","this","too","under","want","was","well","went","what","white","who","will","with","yes"];

var firstGradeWords = ["after","again","an","any","ask","as","by","could","every","fly","from","give","going","had","has","her","him","his","how","just","know","let","live","may","of","old","once","open","over","put","round","some","stop","take","thank","them","then","think","walk","were","when"];

var secondGradeWords = ["always","around","because","been","before","best","both","buy","call","cold","does","don't","fast","first","five","found","gave","goes","green","its","made","many","off","or","pull","read","right","sing","sit","sleep","tell","their","these","those","upon","us","use","very","wash","which","why","wish","work","would","write","your"];

var thirdGradeWords = ["about","better","bring","carry","clean","cut","done","draw","drink","eight","fall","far","full","got","grow","hold","hot","hurt","if","own","keep","kind","laugh","light","long","much","myself","never","only","seven","shall","show","six","small","start","ten","today","together","try","warm","pick"];

var readingGameBook1 = ["all","and","can","cat","day","do","dog","fun","is","it","kind","me","not","of","out","play","run","sad","she","skunk","stay","stop","stripe","they","this","to","want","what","will","with"];

var readingGameBook2 = ["agree","big","but","feel","find","for","forget","from","get","glide","go","hide","house","in","little","make","meal","mistake","mouse","no","see","shake","side","snake","the","treat","tree","up","way","you"];

var readingGameBook3 = ["after","are","awake","bark","be","bear","bed","care","dark","eat","girl","gold","hair","he","her","his","honey","know","like","locks","long","nap","shock","some","steal","sweet","that","there","thing","where"];

var readingGameBook4 = ["back","beak","below","by","clock","come","fish","flock","food","have","ice","if","land","look","more","now","off","one","penguins","plane","right","sea","seek","seven","sight","slide","snow","so","we","work"];

var readingGameBook5 = ["about","again","ago","at","because","behind","beside","castle","did","each","flower","fly","gate","last","leave","only","people","rain","show","shower","sit","sky","such","sun","take","then","unicorn","wall","why","window"];

var readingGameBook6 = ["alphabet","belong","book","chase","could","dolphin","even","fair","front","goes","goose","hen","hop","loose","my","once","over","page","rabbit","should","soon","think","toad","try","vulture","wombat","would","wrong","yak","zebra"];

var wordArrays = [];
wordArrays["kindergartenWordsSet01"] = kindergartenWordsSet01;
wordArrays["prePrimerWords"] = prePrimerWords;
wordArrays["primerWords"] = primerWords;
wordArrays["firstGradeWords"] = firstGradeWords;
wordArrays["secondGradeWords"] = secondGradeWords;
wordArrays["thirdGradeWords"] = thirdGradeWords;
wordArrays["readingGameBook1"] = readingGameBook1;
wordArrays["readingGameBook2"] = readingGameBook2;
wordArrays["readingGameBook3"] = readingGameBook3;
wordArrays["readingGameBook4"] = readingGameBook4;
wordArrays["readingGameBook5"] = readingGameBook5;
wordArrays["readingGameBook6"] = readingGameBook6;

var currentWordArray = kindergartenWordsSet01;
var numberOfWords = 8;

var changeWordArray = function() {
    currentWordArray = wordArrays[$("#wordgroup").val()];
    getWords();
}

var changeNumberOfWords = function() {
    numberOfWords = parseInt($("#numberofwords").val());
    getWords();  
    if (numberOfWords > 10) {
        $("li").removeClass("lismall").removeClass("lilarge").addClass("lilarger");
    } else if (numberOfWords > 8) {
        $("li").removeClass("lismall").removeClass("lilarger").addClass("lilarge");
    } else {
        $("li").removeClass("lilarge").removeClass("lilarger").addClass("lismall");
    }
}

var uppercase = true;

function toggleCase() {
    if (uppercase) {
        uppercase = false;
        $("#caseToggle").html("Toggle UpperCase");
        $( "#container" ).html($( "#container" ).html().toLowerCase());
    } else {
        uppercase = true;
        $("#caseToggle").html("Toggle LowerCase");
        $( "#container" ).html($( "#container" ).html().toUpperCase());
    }
    if (soundOn) speakWord(baseWord);
}

var serifFont = true;

function toggleFont() {
    if (serifFont) {
        serifFont = false;
        document.getElementById("container").style.fontFamily = "Arial,sans-serif";
        document.getElementById("sentence").style.fontFamily = "Arial,sans-serif";
        document.getElementById("fontToggle").innerHTML = "Serif Font";
    } else {
        serifFont = true;
        document.getElementById("container").style.fontFamily = "lucida grande";
        document.getElementById("sentence").style.fontFamily = "lucida grande";
        document.getElementById("fontToggle").innerHTML = "Sans-Serif";
    }
}

var soundOn = true;

function toggleSound() {
    if (soundOn) {
        soundOn = false;
        $("#soundToggle").prop('value', "Sound On");
    } else {
        soundOn = true;
        $("#soundToggle").prop('value', "Sound Off");
    }
}

function speakWord(word) {
    if('speechSynthesis' in window && soundOn) {
      var speech = new SpeechSynthesisUtterance(word);
      speech.lang = 'en-US';
      window.speechSynthesis.speak(speech);
    }
}

var readSentence = function(word) {
    if(word in sentences)
    {
        var sentence = sentences[word].toString();
        speakWord(sentence);
        $("#sentence").html(sentence
          .replace(' ' + word + ' ',' <u>' + word + '</u> ')
          .replace(' ' + word + '.',' <u>' + word + '</u>.'));
    }
}

function getRandomColor() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.floor(Math.random() * 13)];
    }
    return color;
}

function getBrightHex() {
    var hexvals = ["8", "9", "A", "B", "C", "D", "E", "F"];
    currHexVal = "#";
    for(i = 0; i < 6; i++) {
        idx = Math.floor(Math.random() * 7); //picks a num 0 to 14
        currHexVal += hexvals[idx];
    }
    return currHexVal;
}

function getDarkHex() {
    var hexvals = ["0", "1", "2", "3", "4", "5", "6", "7"];
    currHexVal = "#";
    for(i = 0; i < 6; i++) {
        idx = Math.floor(Math.random() * 7); //picks a num 0 to 14
        currHexVal += hexvals[idx];
    }
    return currHexVal;
}

var winAnimation = function() {
    var audioElement = document.createElement('audio');
    audioElement.setAttribute('src', 'mp3/tada.mp3');
    $.get();

    window.setTimeout(function(){
        audioElement.play();
    }, 3000);

    var animationInterval = setInterval(function(){
        var randColor = getRandomColor();
         $("body").css("background-color",randColor);
    },100);
    window.setTimeout(function(){
        window.clearInterval(animationInterval);
        $("body").css("background-color","");
        audioElement.pause();
    }, 5000);
}

// randomize array of words
var words = [];
var timeRunning = 0;
var currentWordCharacterArray = [];
var currentWord = "";
var firstKeyPressed = false;
var timer;

var randomizeWords = function(){
  Array.prototype.randomize = function()
  {
    var i = this.length, j, temp;
    while ( --i )
    {
      j = Math.floor( Math.random() * (i - 1) );
      temp = this[i];
      this[i] = this[j];
      this[j] = temp;
    }
  };

  words.randomize();
  //winAnimation();
}

var getWords = function() {
    window.clearInterval(timer);
    $('#time').text('Time: 0.0');
    firstKeyPressed = false;
    words = [];

    // get words, place them in an array & randomize the order
    for (var i = 0; i < numberOfWords; i++) {
      var word = currentWordArray[Math.floor(Math.random()*currentWordArray.length)];
      //Prevent adding duplicate words to the array.
      var notInArray = false;
      while (!notInArray) {
        if ($.inArray(word, words) != -1) {
          word = currentWordArray[Math.floor(Math.random()*currentWordArray.length)];
        }
        else {
          notInArray = true;
        }
      }
      words.push(word);
    }
    randomizeWords();
    buildWordBlocks();
    currentWord = words[0];
}

var buildWordBlocks = function() {
    if (words.length != 0)
    {
      currentWordCharacterArray = words[0].split("");
    }

    // output words then hide them
    var output = "<ol>"; 
    for (var i = 0; i < words.length; i++) { 
      output += "<li>";
      if (uppercase) {
        if (i == 0)
        {
          output += "<span class=\"currentletter\">" + currentWordCharacterArray[0].toUpperCase() + "</span>" 
            + "<span>" + words[i].substring(1, words[i].length).toUpperCase() + "</span>";
        }
        else
        {
          output += "<span>" + words[i].toUpperCase() + "</span>";
        }
      } else {
        if (i == 0)
        {
          output += "<span class=\"currentletter\">" + currentWordCharacterArray[0].toLowerCase() + "</span>" 
            + "<span>" + words[i].substring(1, words[i].length).toLowerCase() + "</span>";
        }
        else
        {
          output += "<span>" + words[i].toLowerCase() + "</span>";
        }
      }
      output += "</li>";
    }
    output += "</ol>";

    $("#container").html(output);
    bounceChar();
}

var bounceChar = function() {
    $('.currentLetter').css({'left':($('#container').position().left - 10) + 'px', 'top':($('#container').position().top - 5) + 'px'}).animate({top: '+=' + 5}, 200, 'easeOutBounce').animate({top: '-=' + 5}, 200, 'easeOutBounce');
    setTimeout(bounceChar, 400 );
}

var keypressAllowed = true;

var testKeyPress = function(e){
  //This code prevents user from holding down a key.
  if (event.repeat != undefined) {
    keypressAllowed = !event.repeat;
  }
  if (!keypressAllowed) return;
  keypressAllowed = false;

  if(currentWordCharacterArray.length != 0 && String.fromCharCode(e.keyCode).toUpperCase() == currentWordCharacterArray[0].toUpperCase()) {
    alphacolor = getBrightHex();
    document.getElementById("container").style.color = alphacolor;

    backgroundcolor = getDarkHex();
    document.body.style.background = backgroundcolor;


    if(!firstKeyPressed){
      timer = setInterval(function(){
        timeRunning += 0.01;
        $('#time').text('Time: ' + timeRunning.toFixed(3));
      }, 10);
      firstKeyPressed = true;
    }
      
    $('body').append('<span class="staticLetter">' + currentWordCharacterArray[0] + '</span>');
    
    $('.staticLetter').css({'left':$('#container').position().left + 'px', 'top':$('#container').position().top + 'px'}).animate({top: '+=' + 300}, 500, 'easeOutBounce').fadeOut('slow');

    $('.currentLetter').remove();

    currentWordCharacterArray.shift();

    if(currentWordCharacterArray.length == 0) {
        speakWord(currentWord);
        readSentence(currentWord);
        words.shift()
        currentWord = words[0];
        if (words.length == 0) {
            window.clearInterval(timer);
            winAnimation();
            $("#sentence").html('You typed ' + numberOfWords + ' words in ' + timeRunning.toFixed(3) + ' seconds!!');
        } else {
          currentWordCharacterArray = words[0].split("");
        }
        buildWordBlocks();
    } else {
        words[0] = currentWordCharacterArray.join("");
        buildWordBlocks();
    }
  } else {
    var audioElement = document.createElement('audio');
    audioElement.setAttribute('src', 'mp3/wrong.mp3');
    $.get();
    audioElement.play();
  }
}

$(document).ready(function() {
    getWords();
    $("#wordgroup").change(function() {
        changeWordArray();
    });
    $("#numberofwords").change(function() {
        changeNumberOfWords();
    });
    $(window).keydown(function(e){
        testKeyPress(e);
    });
    $(document).keyup(function(e) { 
      keypressAllowed = true;
    });
    $(document).focus(function(e) { 
      keypressAllowed = true;
    });
});

</script>
</head>
<body>
<div id="time" class="timecontainer">Time: </div>
<div id="container" class="containersmall"></div>
<div id="footer">
    <h1 id="sentence">Site Words Typing Game</h1>
    <form >
      <select id="wordgroup">
          <option value="kindergartenWordsSet01">Kindergarten Words Set 1</option>
          <option value="prePrimerWords">Jill Perkins' Pre-Primer Words</option>
          <option value="primerWords">Jill Perkins' Primer Words</option>
          <option value="firstGradeWords">Jill Perkins' First-Grade Words</option>
          <option value="secondGradeWords">Jill Perkins' Second-Grade Words</option>
          <option value="thirdGradeWords">Jill Perkins' Third-Grade Words</option>
          <option value="readingGameBook1">Kenneth Hodkinson's Reading Game Book 1 - Skunk</option>
          <option value="readingGameBook2">Kenneth Hodkinson's Reading Game Book 2 - Snake</option>
          <option value="readingGameBook3">Kenneth Hodkinson's Reading Game Book 3 - Bear</option>
          <option value="readingGameBook4">Kenneth Hodkinson's Reading Game Book 4 - Penguins</option>
          <option value="readingGameBook5">Kenneth Hodkinson's Reading Game Book 5 - Unicorn</option>
          <option value="readingGameBook6">Kenneth Hodkinson's Reading Game Book 6 - Zebra</option>
      </select>
      <select id="numberofwords">
          <option value="4">4 Words</option>
          <option value="6">6 Words</option>
          <option value="8" selected>8 Words</option>
          <option value="10">10 Words</option>
          <option value="12">12 Words</option>
      </select><br/>
      <input type="button" value="New Game" onclick="getWords();" class="myButton" />
      <input type="button" value="Sound Off" onclick="toggleSound();" class="myButton" id="soundToggle" />
      <input type="button" value="Toggle LowerCase" onclick="toggleCase();" class="myButton" id="soundToggle" />
      <input type="button" value="Sans-Serif" onclick="toggleFont();" class="myButton" id="soundToggle" />
      <br/>
      <p>Built on <a href="http://codepen.io/jamesbarnett/pen/kiGsl">LOLCatz Memory Game</a> by jamesbarnett, Dolch Site Words from <a href="http://www.mrsperkins.com/files/dolch_book.pdf">Jill Perkins' Workbook</a>, and Reading Game words from <a href="http://thereadinggame.com/">Kenneth Hodkinson</a>.</p>
    </form>
</div>
</body>
</html>